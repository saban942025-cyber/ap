<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>×ª×™×§×•×Ÿ ××©×ª××© ×× ×”×œ</title>
    <style>body { font-family: sans-serif; text-align: center; padding: 50px; direction: rtl; }</style>
</head>
<body>
    <h2>ğŸ› ï¸ ××ª×§×Ÿ ×¤×¨×•×¤×™×œ ×œ××©×ª××© ×¨×××™...</h2>
    <div id="status">××ª×—×‘×¨ ×œ××¡×“ × ×ª×•× ×™×...</div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
        import { getFirestore, doc, setDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";

        const firebaseConfig = {
          apiKey: "AIzaSyDq0oVwS6zbEfsgrYBRkeBq80dDUKMedzo", 
          authDomain: "saban94-78949.firebaseapp.com", 
          projectId: "saban94-78949", 
          storageBucket: "saban94-78949.firebasestorage.app", 
          messagingSenderId: "41553157903", 
          appId: "1:41553157903:web:cc33d252cff023be97a87a"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // ×”× ×ª×•× ×™× ×©×‘×™×§×©×ª ×œ×”×’×“×™×¨
        const TARGET_UID = "Z96CCdBxGXfrPMXlMjrQMnv55qA3";
        
        const profileData = {
            name: "×¨×××™-××—×œ×§×ª ×”×–×× ×•×ª",
            email: "ramims@saban94.co.il",
            role: "admin",       // ×”×¨×©××ª ×× ×”×œ
            phone: "",           // ××¤×©×¨ ×œ×¢×¨×•×š ××—"×›
            projects: [],        // ××¢×¨×š ×¨×™×§ ×œ×× ×™×¢×ª ×©×’×™××•×ª
            createdAt: serverTimestamp()
        };

        async function fixUser() {
            try {
                // ×›×•×ª×‘ ×™×©×™×¨×•×ª ×œ× ×ª×™×‘ customers/UID
                await setDoc(doc(db, "customers", TARGET_UID), profileData);
                
                document.getElementById('status').innerHTML = 
                    `<h3 style="color:green">âœ… ×‘×•×¦×¢ ×‘×”×¦×œ×—×”!</h3>
                     <p>×”×¤×¨×•×¤×™×œ ×©×œ ×¨×××™ × ×•×¦×¨ ×‘×××’×¨.</p>
                     <p>×›×¢×ª × ×™×ª×Ÿ ×œ×”×™×›× ×¡ ×œ××¤×œ×™×§×¦×™×”.</p>`;
            } catch (error) {
                document.getElementById('status').innerHTML = 
                    `<h3 style="color:red">âŒ ×©×’×™××”:</h3>
                     <p>${error.message}</p>`;
                console.error(error);
            }
        }

        fixUser();
    </script>
</body>
</html>
