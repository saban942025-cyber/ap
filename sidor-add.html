<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sidor Dev | מדריך הקמה ופיתוח</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;700&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Heebo', sans-serif; background-color: #0f172a; color: #e2e8f0; }
        .font-mono { font-family: 'Fira Code', monospace; }
        .glass { background: rgba(30, 41, 59, 0.5); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.1); }
        .code-block { background: #1e293b; padding: 1.5rem; border-radius: 0.5rem; border: 1px solid #334155; overflow-x: auto; direction: ltr; text-align: left; }
        .json-key { color: #93c5fd; }
        .json-string { color: #86efac; }
        .json-number { color: #fca5a5; }
        .json-bool { color: #f9a8d4; }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <header class="bg-slate-900 border-b border-slate-800 sticky top-0 z-50">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <div class="flex items-center gap-3">
                <div class="bg-blue-600 p-2 rounded-lg text-white"><i data-lucide="terminal-square"></i></div>
                <div>
                    <h1 class="text-xl font-bold text-white">Sidor Dev Guide</h1>
                    <p class="text-xs text-slate-400">תיעוד טכני ומדריך הקמה</p>
                </div>
            </div>
            <nav class="hidden md:flex gap-6 text-sm font-medium text-slate-300">
                <a href="#simulation" class="hover:text-white transition">סימולציה</a>
                <a href="#customer-schema" class="hover:text-white transition">לקוח (Customer)</a>
                <a href="#worker-schema" class="hover:text-white transition">עובד (Worker)</a>
                <a href="#product-schema" class="hover:text-white transition">מוצר (Product)</a>
            </nav>
        </div>
    </header>

    <main class="flex-1 container mx-auto p-6 max-w-6xl space-y-20">

        <!-- 1. סימולציית זרימה -->
        <section id="simulation">
            <div class="text-center mb-10">
                <h2 class="text-3xl font-bold text-white mb-2">איך המערכת עובדת? (Data Flow)</h2>
                <p class="text-slate-400">תרשים זרימה של המידע בין האפליקציות השונות בזמן אמת.</p>
            </div>

            <div class="relative">
                <!-- קו מחבר רקע -->
                <div class="absolute top-1/2 left-0 right-0 h-1 bg-slate-700 -z-10 hidden md:block"></div>

                <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                    
                    <!-- שלב 1: לקוח -->
                    <div class="glass p-6 rounded-2xl border border-emerald-500/30 relative group">
                        <div class="absolute -top-3 right-6 bg-emerald-600 text-white text-xs px-2 py-1 rounded">שלב 1</div>
                        <div class="w-12 h-12 bg-emerald-900/50 rounded-full flex items-center justify-center mb-4 text-emerald-400"><i data-lucide="smartphone"></i></div>
                        <h3 class="text-lg font-bold text-white mb-2">לקוח (Customer App)</h3>
                        <p class="text-sm text-slate-400 mb-4">יוצר הזמנה או שולח הודעה.</p>
                        <div class="bg-slate-900 p-2 rounded text-xs font-mono text-emerald-300 border border-slate-700">
                            write to: collections/messages<br>
                            type: "ORDER"
                        </div>
                    </div>

                    <!-- שלב 2: שרת/פונקציות -->
                    <div class="glass p-6 rounded-2xl border border-purple-500/30 relative group">
                        <div class="absolute -top-3 right-6 bg-purple-600 text-white text-xs px-2 py-1 rounded">שלב 2</div>
                        <div class="w-12 h-12 bg-purple-900/50 rounded-full flex items-center justify-center mb-4 text-purple-400"><i data-lucide="server"></i></div>
                        <h3 class="text-lg font-bold text-white mb-2">Cloud Functions</h3>
                        <p class="text-sm text-slate-400 mb-4">מזהה הודעה חדשה, שולח Push למנהל.</p>
                        <div class="bg-slate-900 p-2 rounded text-xs font-mono text-purple-300 border border-slate-700">
                            trigger: onCreate(message)<br>
                            action: sendOneSignal()
                        </div>
                    </div>

                    <!-- שלב 3: מנהל -->
                    <div class="glass p-6 rounded-2xl border border-blue-500/30 relative group">
                        <div class="absolute -top-3 right-6 bg-blue-600 text-white text-xs px-2 py-1 rounded">שלב 3</div>
                        <div class="w-12 h-12 bg-blue-900/50 rounded-full flex items-center justify-center mb-4 text-blue-400"><i data-lucide="monitor"></i></div>
                        <h3 class="text-lg font-bold text-white mb-2">מנהל (Admin Panel)</h3>
                        <p class="text-sm text-slate-400 mb-4">רואה הזמנה, משבץ לנהג, מעדכן סטטוס.</p>
                        <div class="bg-slate-900 p-2 rounded text-xs font-mono text-blue-300 border border-slate-700">
                            update: orders/{id}<br>
                            set: status="שויך", driver=...
                        </div>
                    </div>

                    <!-- שלב 4: עובד -->
                    <div class="glass p-6 rounded-2xl border border-amber-500/30 relative group">
                        <div class="absolute -top-3 right-6 bg-amber-600 text-white text-xs px-2 py-1 rounded">שלב 4</div>
                        <div class="w-12 h-12 bg-amber-900/50 rounded-full flex items-center justify-center mb-4 text-amber-400"><i data-lucide="truck"></i></div>
                        <h3 class="text-lg font-bold text-white mb-2">עובד (Worker App)</h3>
                        <p class="text-sm text-slate-400 mb-4">מקבל התראה ("צפצוף"), מנווט ומספק.</p>
                        <div class="bg-slate-900 p-2 rounded text-xs font-mono text-amber-300 border border-slate-700">
                            listen: orders where driver==me<br>
                            action: update status="הושלם"
                        </div>
                    </div>

                </div>
            </div>
        </section>

        <hr class="border-slate-800">

        <!-- 2. סכמות ומבנה נתונים -->

        <!-- CUSTOMER SCHEMA -->
        <section id="customer-schema" class="grid md:grid-cols-2 gap-10">
            <div>
                <h2 class="text-2xl font-bold text-white mb-4 flex items-center gap-2"><i data-lucide="user" class="text-blue-500"></i> הקמת לקוח (Customers)</h2>
                <p class="text-slate-400 mb-6">
                    לקוח באפליקציה הוא דוקומנט בקולקציית <code>customers</code>.
                    <br><strong class="text-red-400">חשוב:</strong> ה-ID של הדוקומנט חייב להיות ה-UID של המשתמש ב-Authentication.
                </p>
                
                <div class="bg-slate-800 p-4 rounded-xl border border-slate-700 mb-6">
                    <h3 class="font-bold text-white mb-2">שדות חובה:</h3>
                    <ul class="list-disc list-inside text-sm text-slate-300 space-y-1">
                        <li><code>name</code>: שם מלא להצגה.</li>
                        <li><code>email</code>: אימייל (לזיהוי ותצוגה).</li>
                        <li><code>projects</code>: מערך של אובייקטים. אם ריק, הלקוח יראה מסך ריק.</li>
                    </ul>
                </div>

                <div class="bg-slate-800 p-4 rounded-xl border border-slate-700">
                    <h3 class="font-bold text-white mb-2">שדות מומלצים (לשדרוג):</h3>
                    <ul class="list-disc list-inside text-sm text-slate-300 space-y-1">
                        <li><code>customerNumber</code>: מזהה לקוח במערכת ERP (קומקס).</li>
                        <li><code>tier</code>: דירוג לקוח (רגיל / זהב / פרימיום).</li>
                        <li><code>creditLimit</code>: מסגרת אשראי (מספר).</li>
                    </ul>
                </div>
            </div>
            
            <div>
                <div class="flex justify-between items-center mb-2">
                    <span class="text-xs text-slate-500">customer_schema.json</span>
                    <button class="text-xs text-blue-400 hover:text-white" onclick="copyCode('cust-code')">העתק JSON</button>
                </div>
                <pre class="code-block text-sm" id="cust-code">
{
  <span class="json-key">"name"</span>: <span class="json-string">"בר אוריל קבלנות"</span>,
  <span class="json-key">"email"</span>: <span class="json-string">"bar.oril@saban.co.il"</span>,
  <span class="json-key">"phone"</span>: <span class="json-string">"050-1234567"</span>,
  <span class="json-key">"customerNumber"</span>: <span class="json-string">"601235"</span>,
  <span class="json-key">"tier"</span>: <span class="json-string">"GOLD"</span>,
  <span class="json-key">"avatarUrl"</span>: <span class="json-string">"https://..."</span>,
  <span class="json-key">"projects"</span>: [
    {
      <span class="json-key">"projectId"</span>: <span class="json-string">"proj-asher-levy"</span>,
      <span class="json-key">"name"</span>: <span class="json-string">"פרויקט אשר לוי"</span>,
      <span class="json-key">"address"</span>: <span class="json-string">"ההסתדרות 29, רעננה"</span>,
      <span class="json-key">"avatarUrl"</span>: <span class="json-string">"https://..."</span>
    },
    {
      <span class="json-key">"projectId"</span>: <span class="json-string">"proj-herzliya-pituach"</span>,
      <span class="json-key">"name"</span>: <span class="json-string">"וילה הרצליה פיתוח"</span>,
      <span class="json-key">"address"</span>: <span class="json-string">"גלי תכלת 50, הרצליה"</span>
    }
  ]
}</pre>
            </div>
        </section>

        <hr class="border-slate-800">

        <!-- WORKER SCHEMA -->
        <section id="worker-schema" class="grid md:grid-cols-2 gap-10">
            <div>
                <h2 class="text-2xl font-bold text-white mb-4 flex items-center gap-2"><i data-lucide="hard-hat" class="text-amber-500"></i> הקמת עובד (Users)</h2>
                <p class="text-slate-400 mb-6">
                    עובדים (נהגים, מחסנאים, מנהלים) נשמרים בקולקציית <code>users</code>.
                    <br>השדה הקריטי הוא <code>role</code>.
                </p>
                
                <div class="bg-slate-800 p-4 rounded-xl border border-slate-700">
                    <h3 class="font-bold text-white mb-2">תפקידים אפשריים (Roles):</h3>
                    <div class="space-y-2">
                        <div class="flex gap-3 items-center text-sm text-slate-300">
                            <span class="bg-amber-900/50 text-amber-400 px-2 py-1 rounded font-mono text-xs">worker</span>
                            <span>עובד כללי / נהג. מקבל משימות.</span>
                        </div>
                        <div class="flex gap-3 items-center text-sm text-slate-300">
                            <span class="bg-blue-900/50 text-blue-400 px-2 py-1 rounded font-mono text-xs">admin</span>
                            <span>מנהל. גישה לדוחות וללוח הבקרה המלא.</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div>
                <div class="flex justify-between items-center mb-2">
                    <span class="text-xs text-slate-500">worker_schema.json</span>
                    <button class="text-xs text-blue-400 hover:text-white" onclick="copyCode('worker-code')">העתק JSON</button>
                </div>
                <pre class="code-block text-sm" id="worker-code">
{
  <span class="json-key">"name"</span>: <span class="json-string">"יוסי הנהג"</span>,
  <span class="json-key">"email"</span>: <span class="json-string">"yossi@saban.co.il"</span>,
  <span class="json-key">"phone"</span>: <span class="json-string">"052-9999999"</span>,
  <span class="json-key">"role"</span>: <span class="json-string">"worker"</span>,
  <span class="json-key">"vehicleNumber"</span>: <span class="json-string">"77-856-12"</span>,
  <span class="json-key">"vehicleType"</span>: <span class="json-string">"משאית מנוף"</span>,
  <span class="json-key">"active"</span>: <span class="json-bool">true</span>
}</pre>
            </div>
        </section>

        <hr class="border-slate-800">

        <!-- PRODUCT SCHEMA -->
        <section id="product-schema" class="grid md:grid-cols-2 gap-10">
            <div>
                <h2 class="text-2xl font-bold text-white mb-4 flex items-center gap-2"><i data-lucide="package" class="text-purple-500"></i> קטלוג מוצרים (Products)</h2>
                <p class="text-slate-400 mb-6">
                    המוצרים מוצגים באפליקציית הלקוח. מומלץ להוסיף תמונות איכותיות.
                </p>
                
                <div class="bg-slate-800 p-4 rounded-xl border border-slate-700">
                    <h3 class="font-bold text-white mb-2">טיפ למפתחים:</h3>
                    <p class="text-sm text-slate-300">
                        השדה <code>calculator</code> הוא אופציונלי אבל משדרג את החוויה. הוא מאפשר לאפליקציה לחשב כמויות ללקוח (למשל: כמה לוחות גבס צריך ל-X מטר קיר).
                    </p>
                </div>
            </div>
            
            <div>
                <div class="flex justify-between items-center mb-2">
                    <span class="text-xs text-slate-500">product_schema.json</span>
                    <button class="text-xs text-blue-400 hover:text-white" onclick="copyCode('prod-code')">העתק JSON</button>
                </div>
                <pre class="code-block text-sm" id="prod-code">
{
  <span class="json-key">"name"</span>: <span class="json-string">"לוח גבס עמיד מים (ירוק)"</span>,
  <span class="json-key">"sku"</span>: <span class="json-string">"10-500"</span>,
  <span class="json-key">"category"</span>: <span class="json-string">"גבס"</span>,
  <span class="json-key">"price"</span>: <span class="json-string">"₪42.00"</span>,
  <span class="json-key">"image"</span>: <span class="json-string">"https://..."</span>,
  <span class="json-key">"spec"</span>: <span class="json-string">"120x260 ס\"מ, עובי 12.5 מ\"מ"</span>,
  <span class="json-key">"stock"</span>: <span class="json-number">150</span>,
  <span class="json-key">"description"</span>: <span class="json-string">"מתאים לחדרים רטובים כמו מקלחות."</span>,
  <span class="json-key">"calculator"</span>: {
    <span class="json-key">"unit"</span>: <span class="json-string">"m2"</span>,
    <span class="json-key">"formula"</span>: <span class="json-string">"(area / 3.12) * 1.1"</span>
  }
}</pre>
            </div>
        </section>

    </main>

    <footer class="border-t border-slate-800 bg-slate-900 mt-20 py-8 text-center text-slate-500 text-sm">
        &copy; 2024 Sidor Development Team | נוצר ע"י Gemini AI
    </footer>

    <script>
        lucide.createIcons();
        function copyCode(id) {
            const el = document.getElementById(id);
            const text = el.innerText;
            navigator.clipboard.writeText(text).then(() => alert('הועתק!'));
        }
    </script>
</body>
</html>
